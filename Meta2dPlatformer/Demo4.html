<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>WebGL 2D Platformer- Demo 4</title>
  <style>
    body { background-color: #333; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
    canvas { border: 2px solid #fff; background-color: #87CEEB; /* Sky blue background */ }
  </style>
</head>
<body>
  <canvas id="canvas" width="640" height="480"></canvas>

  <script id="vertex-shader" type="x-shader/x-vertex">
    attribute vec2 a_position;
    attribute vec2 a_texCoord;

    uniform vec2 u_resolution;
    uniform mat3 u_matrix;

    varying vec2 v_texCoord;

    void main() {
      // 1. Apply the position matrix (move the object in pixels)
      vec2 position = (u_matrix * vec3(a_position, 1)).xy;

      // 2. Convert pixels to 0.0 -> 1.0
      vec2 zeroToOne = position / u_resolution;

      // 3. Convert 0.0 -> 1.0 to 0.0 -> 2.0
      vec2 zeroToTwo = zeroToOne * 2.0;

      // 4. Convert 0.0 -> 2.0 to -1.0 -> 1.0 (Clip Space)
      vec2 clipSpace = zeroToTwo - 1.0;

      // 5. Flip Y axis (Canvas 0 is top, WebGL 0 is bottom)
      gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

      v_texCoord = a_texCoord;
    }
  </script>

  <script id="fragment-shader" type="x-shader/x-fragment">
    precision mediump float;
    uniform sampler2D u_texture;
    varying vec2 v_texCoord;

    void main() {
      gl_FragColor = texture2D(u_texture, v_texCoord);
    }
  </script>
  <script src="script4.js"></script>
</body>
</html>
