<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Character Viewer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script type="module" src="https://unpkg.com/@google/model-viewer@4.1.0/dist/model-viewer.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        model-viewer {
            width: 100%;
            height: 600px;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            background-color: #ffffff;
            --poster-color: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #e2e8f0;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 10px;
        }
        @media (max-width: 768px) {
            .flex-container { flex-direction: column; }
            model-viewer { height: 400px; }
            .panel { margin-top: 1.5rem; width: 100%; }
        }
    </style>
</head>
<body class="p-6 md:p-10 min-h-screen flex items-center justify-center">

    <div class="flex flex-col lg:flex-row w-full max-w-7xl bg-white rounded-2xl shadow-xl p-6 md:p-8 flex-container">
        
        <div class="w-full lg:w-2/3 p-4">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center lg:text-left">Character Showcase</h2>
            
            <model-viewer
                id="character-model"
                src="Apocolypse_Villian.glb"
                alt="A 3D model with multiple animations"
                ar
                shadow-intensity="1"
                camera-controls
                auto-rotate
                rotation-per-second="30deg"
                interaction-prompt="none"
                autoplay
                class="rounded-xl"
            >
                <div class="absolute bottom-4 left-4 right-4 bg-gradient-to-t from-black/60 to-transparent p-4 rounded-b-xl text-white text-center">
                    <p class="text-sm">Use the panel to switch animations.</p>
                </div>
            </model-viewer>
        </div>

        <div class="w-full lg:w-1/3 p-4 panel">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center lg:text-left">Controls</h2>
            <div class="bg-gray-50 p-6 rounded-xl shadow-inner h-full max-h-[600px] overflow-y-auto custom-scrollbar">
                
                <div class="mb-8">
                    <label for="animation-select" class="block text-sm font-bold text-blue-700 uppercase tracking-wider mb-2">
                        Select Animation
                    </label>
                    <div class="relative">
                        <select id="animation-select" class="block w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 pr-8 rounded-lg leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none transition-all cursor-pointer shadow-sm">
                            <option value="">Loading animations...</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                        </div>
                    </div>
                </div>

                <div class="mb-6 border-t border-gray-200 pt-6">
                    <h3 class="text-xl font-semibold text-gray-700 mb-2">Astronaut Character</h3>
                    <p class="text-gray-600 text-sm leading-relaxed">
                        This viewer dynamically reads the clips embedded in your GLB file. Use the dropdown above to toggle between different movements.
                    </p>
                </div>

                <div class="mb-6">
                    <h4 class="text-lg font-medium text-gray-700 mb-2">Technical Stats:</h4>
                    <p class="text-gray-600 text-sm">
                        <strong>Format:</strong> GLB (Binary glTF)<br>
                        <strong>Found Animations:</strong> <span id="anim-count" class="font-mono text-blue-600">0</span>
                    </p>
                </div>

                <div class="text-center mt-8">
                    <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition duration-300 ease-in-out transform hover:-translate-y-1 focus:outline-none">
                        Download Assets
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const modelViewer = document.querySelector("#character-model");
        const select = document.querySelector("#animation-select");
        const animCountDisplay = document.querySelector("#anim-count");

        // Wait for the model to load to access its internal animation list
        modelViewer.addEventListener('load', () => {
            const animations = modelViewer.availableAnimations;
            
            // Clear the loading message
            select.innerHTML = "";
            
            if (animations.length > 0) {
                // Update the UI count
                animCountDisplay.textContent = animations.length;

                // Populate the dropdown
                animations.forEach((anim, index) => {
                    const option = document.createElement("option");
                    option.value = anim;
                    option.textContent = anim;
                    
                    // Optional: Set default if "Dance" is found
                    if (anim === "Dance") option.selected = true;
                    
                    select.appendChild(option);
                });

                // If "Dance" wasn't set as default, start with the first clip
                if (!modelViewer.animationName && animations.length > 0) {
                    modelViewer.animationName = animations[0];
                }
            } else {
                const option = document.createElement("option");
                option.textContent = "No animations found";
                select.appendChild(option);
                animCountDisplay.textContent = "0";
            }
        });

        // Listen for user changing the selection
        select.addEventListener('change', (event) => {
            modelViewer.animationName = event.target.value;
        });
    </script>
</body>
</html>
